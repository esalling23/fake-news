{{!< default}}
{{!-- 
/**
 * Uncertainty Project
 * Developed by Engagement Lab, 2016
 * ==============
 * 
 * Script include for global logic
 * ==========
 */
--}}


var event;
var gameId = '{{gameId}}';
var bottom;
var commentStack;
var commentFalling;

$(document).on('event:comments', function() {

	$('#comment-feed').css('bottom', $('.feed-wrap').height);
	$('#comment-feed').css('height', $('.comment').length*200 + 'px')

	var bottom = 0;

	_.each($('.comment'), function(comment){

		$(comment).css('bottom', bottom);
		bottom += 200;

	});

	// Call comments animation logic	
	StartCommentFeed();	

});

var StartCommentFeed = function(){

	$('#comment-feed').show(function(){
		{{!-- $(this).css('display', 'table-cell'); --}}
	});

	var $items = $("#comment-feed .comment");
	$('#comment-feed').animate({
    bottom: '-1000px'
  }, 30000, 'linear', function() {

  	console.log("round over");

  	socket.emit('comments:end', { gameId: gameId, data: data });

  });

}

// Comment Logic

$('.comment .share-btn').on('click', function(){

	if ($(this).parent().hasClass('shared')){

		return;

	} else {

		$(this).parent().addClass('shared');
		$(this).prop("disabled",true);

		var data = $(this).parent().attr('id');
		
		socket.emit('comment:share', { gameId: gameId, comment: data });
		
	}
	

});